<!DOCTYPE html>
<html>
  <head>
    <title>test</title>
    <meta name="description" content="Hello, WebVR! - A-Frame">
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>

    <script src="https://morandd.github.io/aframe-multitouch-look-controls/multitouch-look-controls.js"></script>

    <script src="https://morandd.github.io/aframe-multitouch-look-controls/example/qrcode.min.js"></script>

    <script>
      AFRAME.registerComponent('autoscale', {
        schema: {type: 'number', default: 1},
        init: function () {
          this.scale();
          this.el.addEventListener('object3dset', () => this.scale());
        },
        scale: function () {
          const el = this.el;
          const span = this.data;
          const mesh = el.getObject3D('mesh');

          if (!mesh) return;

          // Compute bounds.
          const bbox = new THREE.Box3().setFromObject(mesh);

          // Normalize scale.
          const scale = span / bbox.getSize().length();
          mesh.scale.set(scale, scale, scale);

          // Recenter.
          const offset = bbox.getCenter().multiplyScalar(scale);
          mesh.position.sub(offset);
        }
      });

    </script>
  </head>
  <body>



    <a-scene>
      
      <a-assets>
        <!-- <img id="card" src="./assets/temple5/Marker3-01.jpg" /> -->
        <a-asset-item id="castle" src="https://gftruj.github.io/webzamples/aframe/assets/models/sandcastle/SandCastle.gltf"></a-asset-item>
      </a-assets>

      <a-entity autoscale="1.5" id="castle" gltf-model="#castle" animation="property: object3D.rotation.y; from: 0; to: 360; dur: 10000; loop: true;"></a-entity>

      <!-- Look cam.  -->
      <a-camera camera position="1 3 3" multitouch-look-controls></a-camera>
    </a-scene>



    <!-- To view this scene on mobile -->
    <div id="qrcode" style="position:absolute; left:5px; top:5px"></div>
    <script type="text/javascript">
    if (!AFRAME.utils.device.isMobile()){
      new QRCode(document.getElementById("qrcode"), {
        text: "https://bheise.github.io/y/examples/multi.html",
        width: 100,
        height: 100
      });
    } // Only show QR code if we're not already on mobile
    </script>

  </body>
</html>